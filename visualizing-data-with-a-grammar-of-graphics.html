<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 3 Visualizing Data with a Grammar of Graphics | ENES 197: The Fault in Our Data</title>
<meta name="author" content="Brian Danielak">
<meta name="description" content="3.1 Pre-Class Assignment Pick a data-driven graphic. How might the underlying data have been organized? (In other words, if you could access the underlying data for the plot, what do you think its...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="Chapter 3 Visualizing Data with a Grammar of Graphics | ENES 197: The Fault in Our Data">
<meta property="og:type" content="book">
<meta property="og:url" content="https://briandk.github.io/enes-197-the-fault-in-our-data/visualizing-data-with-a-grammar-of-graphics.html">
<meta property="og:description" content="3.1 Pre-Class Assignment Pick a data-driven graphic. How might the underlying data have been organized? (In other words, if you could access the underlying data for the plot, what do you think its...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 3 Visualizing Data with a Grammar of Graphics | ENES 197: The Fault in Our Data">
<meta name="twitter:description" content="3.1 Pre-Class Assignment Pick a data-driven graphic. How might the underlying data have been organized? (In other words, if you could access the underlying data for the plot, what do you think its...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">ENES 197: The Fault in Our Data</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="messiness-in-data.html"><span class="header-section-number">1</span> Messiness in data</a></li>
<li><a class="" href="data-types.html"><span class="header-section-number">2</span> Data Types</a></li>
<li><a class="active" href="visualizing-data-with-a-grammar-of-graphics.html"><span class="header-section-number">3</span> Visualizing Data with a Grammar of Graphics</a></li>
<li><a class="" href="building-models.html"><span class="header-section-number">4</span> Building Models</a></li>
<li><a class="" href="case-studies.html"><span class="header-section-number">5</span> Case Studies</a></li>
<li><a class="" href="course-learning-objectives.html">Course Learning Objectives</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/briandk/enes-197-the-fault-in-our-data">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="visualizing-data-with-a-grammar-of-graphics" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Visualizing Data with a Grammar of Graphics<a class="anchor" aria-label="anchor" href="#visualizing-data-with-a-grammar-of-graphics"><i class="fas fa-link"></i></a>
</h1>
<div id="pre-class-assignment-2" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> Pre-Class Assignment<a class="anchor" aria-label="anchor" href="#pre-class-assignment-2"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Pick a data-driven graphic.</li>
<li>How might the underlying data have been organized? (In other words, if you could access the underlying data for the plot, what do you think its columns might be? What datatypes would those columns be? What might constitute a row?)</li>
<li>What data parameters were mapped onto the graphic?</li>
<li>What visual mappings do you see? (For example, what data is being mapped to the x axis? The y-axis? Color? And so on…)</li>
<li>How would <em>you</em> have graphed this data? Would you make different choices? If so, what would they be? Explain why you would make those choices.</li>
</ol>
<hr>
<p>There’s lots of stuff to do in Python; let’s start with a plot!</p>
</div>
<div id="plotting-the-diamonds-dataset" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> Plotting the <code>diamonds</code> dataset<a class="anchor" aria-label="anchor" href="#plotting-the-diamonds-dataset"><i class="fas fa-link"></i></a>
</h2>
<p>Our first plot is going to make use of the <code>diamonds</code> dataset that ships with <a href="https://github.com/has2k1/plotnine"><code>plotnine</code></a>.</p>
<p>We’ll import the necessary stuff from <code>plotnine</code> first.
It seems like a lot of imports, but I made them all explicit so you can trace which parts of the code come from the <code>plotnine</code> library.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> aes</span>
<span id="cb1-3"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> facet_wrap</span>
<span id="cb1-4"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> ggtitle</span>
<span id="cb1-5"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> ggplot</span>
<span id="cb1-6"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> geom_point</span>
<span id="cb1-7"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> geom_bar</span>
<span id="cb1-8"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> scale_color_brewer</span>
<span id="cb1-9"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> theme_minimal</span>
<span id="cb1-10"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> xlab</span>
<span id="cb1-11"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> ylab</span>
<span id="cb1-12"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine.data <span class="im">import</span> diamonds</span>
<span id="cb1-13"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotnine</span>
<span id="cb1-14"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-15" aria-hidden="true" tabindex="-1"></a>plotnine.options.figure_size <span class="op">=</span> (<span class="dv">11</span>, <span class="fl">8.5</span>)</span>
<span id="cb1-16"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-17" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb1-18"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-18" aria-hidden="true" tabindex="-1"></a>  ggplot(</span>
<span id="cb1-19"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-19" aria-hidden="true" tabindex="-1"></a>    diamonds,</span>
<span id="cb1-20"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-20" aria-hidden="true" tabindex="-1"></a>    aes(</span>
<span id="cb1-21"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-21" aria-hidden="true" tabindex="-1"></a>      x <span class="op">=</span> <span class="st">'carat'</span>,</span>
<span id="cb1-22"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-22" aria-hidden="true" tabindex="-1"></a>      y <span class="op">=</span> <span class="st">'price'</span>,</span>
<span id="cb1-23"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-23" aria-hidden="true" tabindex="-1"></a>      color<span class="op">=</span><span class="st">'clarity'</span>,</span>
<span id="cb1-24"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-24" aria-hidden="true" tabindex="-1"></a>      size <span class="op">=</span> <span class="st">"depth"</span></span>
<span id="cb1-25"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-26"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-27"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="op">+</span> geom_point(alpha <span class="op">=</span> <span class="fl">0.1</span>)</span>
<span id="cb1-28"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="op">+</span> scale_color_brewer(<span class="bu">type</span><span class="op">=</span><span class="st">'qual'</span>, palette<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb1-29"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="op">+</span> facet_wrap(<span class="st">'~color'</span>)</span>
<span id="cb1-30"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="op">+</span> theme_minimal()</span>
<span id="cb1-31"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-31" aria-hidden="true" tabindex="-1"></a>  <span class="op">+</span> xlab(<span class="st">"Carat"</span>)</span>
<span id="cb1-32"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-32" aria-hidden="true" tabindex="-1"></a>  <span class="op">+</span> ylab(<span class="st">"Price ($USD)"</span>)</span>
<span id="cb1-33"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="op">+</span> ggtitle(<span class="st">'Diamond Prices by Carat'</span>)</span>
<span id="cb1-34"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-36"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;ggplot: (8735126622699)&gt;</span></span>
<span id="cb1-37"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-38"><a href="visualizing-data-with-a-grammar-of-graphics.html#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; /opt/hostedtoolcache/Python/3.9.12/x64/lib/python3.9/site-packages/plotnine/utils.py:371: FutureWarning: The frame.append method is deprecated and will be removed from pandas in a future version. Use pandas.concat instead.</span></span></code></pre></div>
<div class="inline-figure"><img src="03-visualizing-data_files/figure-html/unnamed-chunk-1-1.png" width="100%"></div>
</div>
<div id="we-can-also-run-r" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> We can also run R<a class="anchor" aria-label="anchor" href="#we-can-also-run-r"><i class="fas fa-link"></i></a>
</h2>
<p>Below, we’ll generate a similar version of the plot we just made in Python, but we’ll make this one in R.
We’ll need a few different packages to make it work.</p>
<p>As you look at the code and the plot, ask yourself where you spot major differences from the Python version.</p>
<p><em>Can you spot any differences?</em></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org">scales</a></span><span class="op">)</span>

<span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">carat</span>, <span class="va">price</span>, color <span class="op">=</span> <span class="va">clarity</span>, size <span class="op">=</span> <span class="va">depth</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_brewer</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">'qual'</span>, palette <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">color</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/dollar_format.html">dollar_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Example: Comparing the size, price, and clarity of 50,000 diamonds"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-visualizing-data_files/figure-html/unnamed-chunk-2-3.png" width="672"></div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="data-types.html"><span class="header-section-number">2</span> Data Types</a></div>
<div class="next"><a href="building-models.html"><span class="header-section-number">4</span> Building Models</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#visualizing-data-with-a-grammar-of-graphics"><span class="header-section-number">3</span> Visualizing Data with a Grammar of Graphics</a></li>
<li><a class="nav-link" href="#pre-class-assignment-2"><span class="header-section-number">3.1</span> Pre-Class Assignment</a></li>
<li><a class="nav-link" href="#plotting-the-diamonds-dataset"><span class="header-section-number">3.2</span> Plotting the diamonds dataset</a></li>
<li><a class="nav-link" href="#we-can-also-run-r"><span class="header-section-number">3.3</span> We can also run R</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/briandk/enes-197-the-fault-in-our-data/blob/master/03-visualizing-data.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/briandk/enes-197-the-fault-in-our-data/edit/master/03-visualizing-data.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>ENES 197: The Fault in Our Data</strong>" was written by Brian Danielak. It was last built on 2022-05-20.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
