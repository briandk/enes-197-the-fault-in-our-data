<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 4 Comparing Tokenization in Pygments and Pandoc | ENES 197: The Fault in Our Data</title>
<meta name="author" content="Brian Danielak">
<meta name="description" content="Here’s some example Python code: from plotnine import geom_text def myFunction(x: str):   pass And here, to the best of my ability, is how Pygments tokenizes that code vs. how Pandoc does it. Note...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="Chapter 4 Comparing Tokenization in Pygments and Pandoc | ENES 197: The Fault in Our Data">
<meta property="og:type" content="book">
<meta property="og:url" content="https://briandk.github.io/enes-197-the-fault-in-our-data/comparing-tokenization-in-pygments-and-pandoc.html">
<meta property="og:description" content="Here’s some example Python code: from plotnine import geom_text def myFunction(x: str):   pass And here, to the best of my ability, is how Pygments tokenizes that code vs. how Pandoc does it. Note...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 4 Comparing Tokenization in Pygments and Pandoc | ENES 197: The Fault in Our Data">
<meta name="twitter:description" content="Here’s some example Python code: from plotnine import geom_text def myFunction(x: str):   pass And here, to the best of my ability, is how Pygments tokenizes that code vs. how Pandoc does it. Note...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">ENES 197: The Fault in Our Data</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> About</a></li>
<li><a class="" href="course-learning-objectives.html"><span class="header-section-number">2</span> Course Learning Objectives</a></li>
<li><a class="" href="hello-plot-with-python.html"><span class="header-section-number">3</span> Hello Plot with Python</a></li>
<li><a class="active" href="comparing-tokenization-in-pygments-and-pandoc.html"><span class="header-section-number">4</span> Comparing Tokenization in Pygments and Pandoc</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/briandk/enes-197-the-fault-in-our-data">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="comparing-tokenization-in-pygments-and-pandoc" class="section level1" number="4">
<h1>
<span class="header-section-number">4</span> Comparing Tokenization in Pygments and Pandoc<a class="anchor" aria-label="anchor" href="#comparing-tokenization-in-pygments-and-pandoc"><i class="fas fa-link"></i></a>
</h1>
<p>Here’s some example Python code:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> geom_text</span>
<span id="cb5-2"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> myFunction(x: <span class="bu">str</span>):</span>
<span id="cb5-3"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span></code></pre></div>
<p>And here, to the best of my ability, is how Pygments tokenizes that code vs. how Pandoc does it. Note that Pygments seems to recognize and apply token types that pandoc does not (for example, Pygments recognizes punctuation (p) in the above code where pandoc does not. Note also that pandoc may assign token types for which there is no added style. These two behaviors mean:</p>
<ul>
<li><p>Unstyled code might still be semantically tokenized, but</p></li>
<li><p>Untokenized code cannot and will not be styled</p></li>
</ul>
<div id="how-the-code-gets-tokenized" class="section level2" number="4.1">
<h2>
<span class="header-section-number">4.1</span> How the Code Gets Tokenized<a class="anchor" aria-label="anchor" href="#how-the-code-gets-tokenized"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-table"><table class="table table-sm">
<caption>Comparing how Python code gets tokenized in Pygments vs. Pandoc</caption>
<colgroup>
<col width="11%">
<col width="45%">
<col width="43%">
</colgroup>
<thead><tr class="header">
<th>Token</th>
<th>
<em>Pygments</em> Token Type<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Pygments token types are taken from: &lt;a href="https://github.com/pygments/pygments/blob/ab4afd821aa41403f7a0b1e714112c40b2ad843b/pygments/styles/tango.py#L44-L140" class="uri"&gt;https://github.com/pygments/pygments/blob/ab4afd821aa41403f7a0b1e714112c40b2ad843b/pygments/styles/tango.py#L44-L140&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a>
</th>
<th>
<em>Pandoc</em> Token Type<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Pandoc token types are taken from: &lt;a href="https://github.com/jgm/skylighting/blob/5ccee442dff7eb00423e807f59e24f2a0082bcaa/skylighting-core/src/Skylighting/Styles.hs#L109-L146" class="uri"&gt;https://github.com/jgm/skylighting/blob/5ccee442dff7eb00423e807f59e24f2a0082bcaa/skylighting-core/src/Skylighting/Styles.hs#L109-L146&lt;/a&gt;&lt;/p&gt;'><sup>2</sup></a>
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>from</code></td>
<td>
<strong>kn</strong> (Keyword.Namespace)</td>
<td>
<strong>im</strong> (ImportTok)</td>
</tr>
<tr class="even">
<td><code>plotnine</code></td>
<td>
<strong>nn</strong> (Name.Namespace)</td>
<td>[no token type]</td>
</tr>
<tr class="odd">
<td><code>import</code></td>
<td>
<strong>kn</strong> (Keyword.Namespace)</td>
<td>
<strong>im</strong> (ImportTok)</td>
</tr>
<tr class="even">
<td><code>geom_text</code></td>
<td>
<strong>n</strong> (Name)</td>
<td>[no token type]</td>
</tr>
<tr class="odd">
<td>—</td>
<td>—</td>
<td>—</td>
</tr>
<tr class="even">
<td><code>def</code></td>
<td>
<strong>k</strong> (Keyword)</td>
<td>
<strong>kw</strong> (KeywordTok)</td>
</tr>
<tr class="odd">
<td><code>myFunction</code></td>
<td>
<strong>nf</strong> (Name.Function)</td>
<td>[no token type]</td>
</tr>
<tr class="even">
<td><code>(</code></td>
<td>
<strong>p</strong> (Punctuation)</td>
<td>[no token type]</td>
</tr>
<tr class="odd">
<td><code>x</code></td>
<td>
<strong>n</strong> (Name)</td>
<td>[no token type]</td>
</tr>
<tr class="even">
<td><code>:</code></td>
<td>
<strong>p</strong> (Punctuation)</td>
<td>[no token type]</td>
</tr>
<tr class="odd">
<td><code>str</code></td>
<td>
<strong>nb</strong> (Name.Builtin)</td>
<td>
<strong>bu</strong> (BuiltInTok)</td>
</tr>
<tr class="even">
<td><code>):</code></td>
<td>
<strong>p</strong> (Punctuation)</td>
<td>[no token type]</td>
</tr>
<tr class="odd">
<td><code>pass</code></td>
<td>
<strong>k</strong> (Keyword)</td>
<td>
<strong>cf</strong> (ControlFlowTok)</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table></div>
</div>
<div id="seeing-what-syntax-coloring-looks-like-with-a-default-snippet-from-pygments" class="section level2" number="4.2">
<h2>
<span class="header-section-number">4.2</span> Seeing what syntax-coloring looks like with a default snippet from Pygments<a class="anchor" aria-label="anchor" href="#seeing-what-syntax-coloring-looks-like-with-a-default-snippet-from-pygments"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Iterator</span>
<span id="cb6-2"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># This is an example</span></span>
<span id="cb6-4"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Math:</span>
<span id="cb6-5"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb6-6"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> fib(n: <span class="bu">int</span>) <span class="op">-&gt;</span> Iterator[<span class="bu">int</span>]:</span>
<span id="cb6-7"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-7" aria-hidden="true" tabindex="-1"></a>        <span class="co">""" Fibonacci series up to n """</span></span>
<span id="cb6-8"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-8" aria-hidden="true" tabindex="-1"></a>        a, b <span class="op">=</span> <span class="dv">0</span>, <span class="dv">1</span></span>
<span id="cb6-9"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> a <span class="op">&lt;</span> n:</span>
<span id="cb6-10"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">yield</span> a</span>
<span id="cb6-11"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-11" aria-hidden="true" tabindex="-1"></a>            a, b <span class="op">=</span> b, a <span class="op">+</span> b</span>
<span id="cb6-12"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-13" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> <span class="bu">sum</span>(Math.fib(<span class="dv">42</span>))</span>
<span id="cb6-14"><a href="comparing-tokenization-in-pygments-and-pandoc.html#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"The answer is </span><span class="sc">{}</span><span class="st">"</span>.<span class="bu">format</span>(result))</span></code></pre></div>

</div>
</div>








  <div class="chapter-nav">
<div class="prev"><a href="hello-plot-with-python.html"><span class="header-section-number">3</span> Hello Plot with Python</a></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#comparing-tokenization-in-pygments-and-pandoc"><span class="header-section-number">4</span> Comparing Tokenization in Pygments and Pandoc</a></li>
<li><a class="nav-link" href="#how-the-code-gets-tokenized"><span class="header-section-number">4.1</span> How the Code Gets Tokenized</a></li>
<li><a class="nav-link" href="#seeing-what-syntax-coloring-looks-like-with-a-default-snippet-from-pygments"><span class="header-section-number">4.2</span> Seeing what syntax-coloring looks like with a default snippet from Pygments</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/briandk/enes-197-the-fault-in-our-data/blob/master/comparing-python-tokenization.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/briandk/enes-197-the-fault-in-our-data/edit/master/comparing-python-tokenization.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>ENES 197: The Fault in Our Data</strong>" was written by Brian Danielak. It was last built on 2022-05-20.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
